<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>MONITORING PARTS TUHUP</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.39.0/build/stlite.css" />
    <style>
      /* Import Font Techno */
      @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
      
      /* DEFINISI WARNA CYBERPUNK BARU */
      :root {
        --cyan: #00f3ff;   /* Warna Utama (Border, Judul) */
        --green: #39ff14;  /* Warna Sukses/Masuk */
        --red: #ff003c;    /* Warna Aksen/Keluar */
        --bg: #050505;     /* Hitam Pekat */
        --card-bg: #0a0f0d; /* Hitam kehijauan dikit */
      }

      body { background-color: var(--bg); color: #e0e0e0; font-family: 'Share Tech Mono', monospace; }
      
      /* Styling Container Utama */
      .stApp {
        background-image: linear-gradient(rgba(5, 5, 5, 0.95), rgba(5, 5, 5, 0.95)), 
                          url("https://www.transparenttextures.com/patterns/circuit-board.png");
        border: 1px solid var(--cyan);
        box-shadow: 0 0 15px rgba(0, 243, 255, 0.2);
      }

      /* Judul & Header */
      h1, h2, h3 { color: var(--cyan) !important; text-shadow: 0 0 8px var(--cyan); }
      
      /* Metric Box (Kotak Angka) */
      div[data-testid="stMetricValue"] { color: var(--green) !important; text-shadow: 0 0 5px var(--green); }
      div[data-testid="stMetricLabel"] { color: var(--cyan) !important; }

      /* Tombol / Widget */
      .stButton>button {
        border: 1px solid var(--green);
        color: var(--green);
        background: transparent;
      }
      .stButton>button:hover {
        background: var(--green);
        color: black;
        box-shadow: 0 0 15px var(--green);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script src="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.39.0/build/stlite.js"></script>
    <script>
      stlite.mount({
        // TAMBAHKAN 'pyarrow' DI SINI UNTUK MEMPERBAIKI ERROR
        requirements: ["pandas", "plotly", "pyarrow"],
        entrypoint: "app.py",
        files: {
          "app.py": `
import streamlit as st
import pandas as pd
import plotly.express as px

# Konfigurasi Halaman
st.set_page_config(layout="wide", page_title="MONITORING TUHUP")

# --- HEADER SECTION ---
st.markdown("<h1 style='text-align: center; letter-spacing: 3px;'>// MONITORING PARTS IN-OUT TUHUP //</h1>", unsafe_allow_html=True)
st.markdown(f"<hr style='border: 1px solid #00f3ff; box-shadow: 0 0 5px #00f3ff;'>", unsafe_allow_html=True)

# --- BAGIAN 1: SCORECARD (RINGKASAN) ---
# Kita buat 4 kolom agar lebih informatif
c1, c2, c3, c4 = st.columns(4)

with c1:
    st.metric(label="TOTAL ITEM IN (JAN)", value="1,240 PCS", delta="+120")
with c2:
    st.metric(label="TOTAL ITEM OUT (JAN)", value="890 PCS", delta="-45", delta_color="inverse")
with c3:
    # Warna custom untuk stok pakai HTML render di markdown kalau mau lebih spesifik, tapi metric bawaan sudah oke
    st.metric(label="STOCK LEVEL", value="SAFE", delta="Stable")
with c4:
    st.metric(label="CRITICAL PARTS", value="5 ITEMS", delta="Need Order", delta_color="inverse")

# --- BAGIAN 2: DATA EXCEL SIMULASI ---
# Membuat data dummy yang strukturnya mirip file Excel kamu
data_in = {
    'TANGGAL': ['01-Jan-2026', '02-Jan-2026', '03-Jan-2026', '03-Jan-2026', '05-Jan-2026'],
    'PO': ['1011803181', '1011776442', '1011800555', '1011814886', '1011818350'],
    'MATDOC': ['5001193892', '5001193890', '5001193879', '5001193878', '5001195370'],
    'QTY_IN': [2, 50, 2, 4, 10], # Anggap unit sudah dikonversi ke angka
    'SATUAN': ['IBC', 'EA', 'IBC', 'DRUM', 'IBC']
}
df_in = pd.DataFrame(data_in)

data_out = {
    'TANGGAL': ['01-Jan-2026', '01-Jan-2026', '02-Jan-2026', '03-Jan-2026', '03-Jan-2026'],
    'MATDOC_OUT': ['-', '-', '500119xxxx', '-', '-'],
    'QTY_OUT': [2, 1, 40, 1, 4],
    'REMARKS': ['ATF', 'SAE80W90', 'TYRE 18PR', 'T50', 'GREASE']
}
df_out = pd.DataFrame(data_out)

# --- BAGIAN 3: GRAFIK MONITORING ---
st.write("---")
col_grafik, col_tabel = st.columns([2, 1])

with col_grafik:
    st.markdown("### üìà ANALISA PERGERAKAN HARIAN")
    
    # Gabung data untuk grafik sederhana
    # Kita pastikan format tanggal aman
    df_chart = pd.DataFrame({
        "Tanggal": ["01-Jan", "02-Jan", "03-Jan", "04-Jan", "05-Jan"],
        "Barang Masuk (IN)": [20, 50, 15, 0, 30],
        "Barang Keluar (OUT)": [5, 40, 25, 10, 15]
    })
    
    # Warna Grafik: Green untuk Masuk, Red untuk Keluar
    fig = px.bar(df_chart, x="Tanggal", y=["Barang Masuk (IN)", "Barang Keluar (OUT)"],
                 barmode='group',
                 color_discrete_map={"Barang Masuk (IN)": "#39ff14", "Barang Keluar (OUT)": "#ff003c"})
    
    fig.update_layout(
        paper_bgcolor='rgba(0,0,0,0)',
        plot_bgcolor='rgba(0,0,0,0)',
        font=dict(color='#00f3ff'),
        legend=dict(orientation="h", y=1.1)
    )
    st.plotly_chart(fig, use_container_width=True)

with col_tabel:
    st.markdown("### ‚ö†Ô∏è LOW STOCK ALERT")
    # Tabel stok menipis
    stok_kritis = pd.DataFrame({
        "Nama Part": ["TYRE 18PR", "GREASE", "FILTER OLI"],
        "Sisa": [2, 4, 1],
        "Status": ["CRITICAL", "LOW", "CRITICAL"]
    })
    
    # Menampilkan tabel
    st.dataframe(stok_kritis, hide_index=True, use_container_width=True)
    
    st.info("Pemberitahuan: Data terakhir di-update 5 menit yang lalu dari Local File.")

# --- BAGIAN 4: DETAIL LOG BOOK (Mirip Excel) ---
st.write("---")
st.markdown("### üìë LOG BOOK HARIAN (IN & OUT)")

tab1, tab2 = st.tabs(["DATA IN (MASUK)", "DATA OUT (KELUAR)"])

with tab1:
    st.dataframe(df_in, use_container_width=True)

with tab2:
    st.dataframe(df_out, use_container_width=True)

          `,
        },
      }, document.getElementById("root"));
    </script>
  </body>
</html>